<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Add and manage data | Vuex Easy Firestore 🔥</title>
    <meta name="description" content="Easy coupling of firestore and vuex. 2-way sync with 0 boilerplate!">
    
    
    <link rel="preload" href="/vuex-easy-firestore/assets/css/styles.b09044e6.css" as="style"><link rel="preload" href="/vuex-easy-firestore/assets/js/app.b09044e6.js" as="script"><link rel="preload" href="/vuex-easy-firestore/assets/js/4.6f83facc.js" as="script"><link rel="prefetch" href="/vuex-easy-firestore/assets/css/1.styles.d3602896.css"><link rel="prefetch" href="/vuex-easy-firestore/assets/js/1.d3602896.js"><link rel="prefetch" href="/vuex-easy-firestore/assets/css/2.styles.8662775e.css"><link rel="prefetch" href="/vuex-easy-firestore/assets/js/2.8662775e.js"><link rel="prefetch" href="/vuex-easy-firestore/assets/js/3.25383995.js"><link rel="prefetch" href="/vuex-easy-firestore/assets/js/5.799ee39a.js"><link rel="prefetch" href="/vuex-easy-firestore/assets/js/6.603af246.js"><link rel="prefetch" href="/vuex-easy-firestore/assets/js/7.aaf5a995.js"><link rel="prefetch" href="/vuex-easy-firestore/assets/js/8.a9ae9742.js"><link rel="prefetch" href="/vuex-easy-firestore/assets/js/9.1e962ae4.js"><link rel="prefetch" href="/vuex-easy-firestore/assets/js/10.5094f20e.js"><link rel="prefetch" href="/vuex-easy-firestore/assets/js/11.78e53883.js">
    <link rel="stylesheet" href="/vuex-easy-firestore/assets/css/1.styles.d3602896.css"><link rel="stylesheet" href="/vuex-easy-firestore/assets/css/2.styles.8662775e.css"><link rel="stylesheet" href="/vuex-easy-firestore/assets/css/styles.b09044e6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vuex-easy-firestore/" class="home-link router-link-active"><!----> <span class="site-name">Vuex Easy Firestore 🔥</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/mesqueeb/vuex-easy-firestore/releases" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Changelog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/mesqueeb/vuex-easy-firestore" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/mesqueeb/vuex-easy-firestore/releases" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Changelog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/mesqueeb/vuex-easy-firestore" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/vuex-easy-firestore/setup.html" class="sidebar-link">Installation &amp; setup</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuex-easy-firestore/setup.html#installation" class="sidebar-link">Installation</a></li><li class="sidebar-sub-header"><a href="/vuex-easy-firestore/setup.html#setup" class="sidebar-link">Setup</a></li><li class="sidebar-sub-header"><a href="/vuex-easy-firestore/setup.html#first-steps" class="sidebar-link">First steps</a></li></ul></li><li><a href="/vuex-easy-firestore/add-and-manage-data.html" class="active sidebar-link">Add and manage data</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuex-easy-firestore/add-and-manage-data.html#basic-usage" class="sidebar-link">Basic usage</a></li><li class="sidebar-sub-header"><a href="/vuex-easy-firestore/add-and-manage-data.html#collection-mode" class="sidebar-link">'collection' mode</a></li><li class="sidebar-sub-header"><a href="/vuex-easy-firestore/add-and-manage-data.html#doc-mode" class="sidebar-link">'doc' mode</a></li><li class="sidebar-sub-header"><a href="/vuex-easy-firestore/add-and-manage-data.html#batch-updates-inserts-deletions" class="sidebar-link">Batch updates/inserts/deletions</a></li><li class="sidebar-sub-header"><a href="/vuex-easy-firestore/add-and-manage-data.html#duplicating-docs" class="sidebar-link">Duplicating docs</a></li></ul></li><li><a href="/vuex-easy-firestore/query-data.html" class="sidebar-link">Query data</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuex-easy-firestore/query-data.html#get-data" class="sidebar-link">Get data</a></li><li class="sidebar-sub-header"><a href="/vuex-easy-firestore/query-data.html#realtime-updates-vs-single-fetch" class="sidebar-link">Realtime updates vs single fetch</a></li><li class="sidebar-sub-header"><a href="/vuex-easy-firestore/query-data.html#realtime-updates-opendbchannel" class="sidebar-link">Realtime updates: openDBChannel</a></li><li class="sidebar-sub-header"><a href="/vuex-easy-firestore/query-data.html#fetching-docs" class="sidebar-link">Fetching docs</a></li><li class="sidebar-sub-header"><a href="/vuex-easy-firestore/query-data.html#firestore-authentication" class="sidebar-link">Firestore authentication</a></li><li class="sidebar-sub-header"><a href="/vuex-easy-firestore/query-data.html#where-orderby-filters" class="sidebar-link">where / orderBy filters</a></li><li class="sidebar-sub-header"><a href="/vuex-easy-firestore/query-data.html#multiple-modules-with-2-way-sync" class="sidebar-link">Multiple modules with 2-way sync</a></li><li class="sidebar-sub-header"><a href="/vuex-easy-firestore/query-data.html#sync-directly-to-module-state" class="sidebar-link">Sync directly to module state</a></li><li class="sidebar-sub-header"><a href="/vuex-easy-firestore/query-data.html#manual-fetch-handling" class="sidebar-link">Manual fetch handling</a></li></ul></li><li><a href="/vuex-easy-firestore/firestore-fields-and-functions.html" class="sidebar-link">Firestore fields and functions</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuex-easy-firestore/firestore-fields-and-functions.html#arrayunion-and-arrayremove" class="sidebar-link">arrayUnion and arrayRemove</a></li><li class="sidebar-sub-header"><a href="/vuex-easy-firestore/firestore-fields-and-functions.html#delete-fields" class="sidebar-link">Delete fields</a></li></ul></li><li><a href="/vuex-easy-firestore/hooks.html" class="sidebar-link">Hooks</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuex-easy-firestore/hooks.html#hooks-on-local-changes" class="sidebar-link">Hooks on local changes</a></li><li class="sidebar-sub-header"><a href="/vuex-easy-firestore/hooks.html#hooks-after-server-changes" class="sidebar-link">Hooks after server changes</a></li><li class="sidebar-sub-header"><a href="/vuex-easy-firestore/hooks.html#execution-timings-of-hooks" class="sidebar-link">Execution timings of hooks</a></li></ul></li><li><a href="/vuex-easy-firestore/extra-features.html" class="sidebar-link">Extra features</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuex-easy-firestore/extra-features.html#variables-for-firestorepath-or-filters" class="sidebar-link">Variables for firestorePath or filters</a></li><li class="sidebar-sub-header"><a href="/vuex-easy-firestore/extra-features.html#fillables-and-guard" class="sidebar-link">Fillables and guard</a></li><li class="sidebar-sub-header"><a href="/vuex-easy-firestore/extra-features.html#default-values" class="sidebar-link">Default values</a></li><li class="sidebar-sub-header"><a href="/vuex-easy-firestore/extra-features.html#firestore-timestamp-conversion" class="sidebar-link">Firestore Timestamp conversion</a></li><li class="sidebar-sub-header"><a href="/vuex-easy-firestore/extra-features.html#shortcut-set-path-doc" class="sidebar-link">Shortcut: set(path, doc)</a></li><li class="sidebar-sub-header"><a href="/vuex-easy-firestore/extra-features.html#pass-firebase-dependency" class="sidebar-link">Pass Firebase dependency</a></li></ul></li><li><a href="/vuex-easy-firestore/config-example.html" class="sidebar-link">Config example</a></li><li><a href="/vuex-easy-firestore/feedback.html" class="sidebar-link">Feedback</a></li></ul> </div> <div class="page"> <div class="content"><h1 id="add-and-manage-data"><a href="#add-and-manage-data" aria-hidden="true" class="header-anchor">#</a> Add and manage data</h1> <h2 id="basic-usage"><a href="#basic-usage" aria-hidden="true" class="header-anchor">#</a> Basic usage</h2> <p>With just 4 actions (set, patch, insert, delete) you can make changes to your vuex store and <strong>everything will automatically stay up to date with your firestore!</strong></p> <p>There are two ways to use vuex-easy-firestore, in 'collection' or 'doc' mode. You can only choose one because this points to the path you sync your vuex module to:</p> <p><strong>Collection mode</strong></p> <ul><li><code>firestoreRefType: 'collection'</code></li> <li><code>firestorePath</code> should be a firestore collection</li> <li>Use when working with multiple documents, all docs will automatically be retrieved and sync when making changes.
<br>eg. when a user has multiple &quot;items&quot; like a to-do list</li></ul> <p><strong>Doc mode</strong></p> <ul><li><code>firestoreRefType: 'doc'</code></li> <li><code>firestorePath</code> should be a single firestore document</li> <li>Use when working with a single doc.
<br>eg. the &quot;settings&quot; or &quot;config&quot; of a user.</li></ul> <p>Whether a vuex module is set to 'doc' or 'collection' mode, will have small changes in the actions you can do, but the syntax is mostly the same.</p> <p>The sync is fully robust and <strong>automatically groups any api calls per 1000 ms</strong>. You don't have to worry about optimising/limiting the api calls, it's all done automatically! (Only one api call per 1000ms will be made for a maximum of 500 changes, if there are more changes queued it will automatically be split over 2 api calls).</p> <blockquote><p>If you still are confused how to set up your database structure when it comes to <strong>documents vs collections</strong>, I highly recommend to check <a href="https://firebase.google.com/docs/firestore/manage-data/structure-data" target="_blank" rel="noopener noreferrer">this guide from Firebase<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> itself.</p></blockquote> <h2 id="collection-mode"><a href="#collection-mode" aria-hidden="true" class="header-anchor">#</a> 'collection' mode</h2> <p>In 'collection' mode, documents that are added to your module will be added in an object under the property you can choose with the <code>statePropName</code> option.</p> <p>Example Vuex module:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> myModule <span class="token operator">=</span> <span class="token punctuation">{</span>
  firestorePath<span class="token punctuation">:</span> <span class="token string">'myDocs'</span><span class="token punctuation">,</span>
  firestoreRefType<span class="token punctuation">:</span> <span class="token string">'collection'</span><span class="token punctuation">,</span>
  moduleName<span class="token punctuation">:</span> <span class="token string">'myModule'</span><span class="token punctuation">,</span>
  statePropName<span class="token punctuation">:</span> <span class="token string">'data'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>With the setup above when documents are added they will appear in the state of the module <code>myModule</code> under the prop called <code>data</code>.</p> <p>Then with these 4 actions: set, patch, insert and delete, you can edit <strong>single docs</strong> of your collection. These actions make sure Firestore will stay in sync.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'myModule/set'</span><span class="token punctuation">,</span> doc<span class="token punctuation">)</span>
<span class="token comment">// 'set' will choose to dispatch either `patch` OR `insert` automatically</span>

<span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'myModule/patch'</span><span class="token punctuation">,</span> doc<span class="token punctuation">)</span> <span class="token comment">// doc needs an 'id' prop</span>
<span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'myModule/insert'</span><span class="token punctuation">,</span> doc<span class="token punctuation">)</span>
<span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'myModule/delete'</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span>
</code></pre></div><h3 id="insert-example"><a href="#insert-example" aria-hidden="true" class="header-anchor">#</a> Insert example</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'myModule/set'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>title<span class="token punctuation">:</span> <span class="token string">'Hello Firestore 🔥'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// or</span>
<span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'myModule/insert'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>title<span class="token punctuation">:</span> <span class="token string">'Hello Firestore 🔥'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ol><li>The object above has just one field: <code>title</code></li> <li>Since there is no <code>id</code> field, the object will be <strong>inserted</strong> as new document</li> <li>The document will <strong>automatically get a new ID</strong></li> <li>The document will appear in Vuex like so:</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// in the module called &quot;myModule&quot;</span>
state<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">'abc123'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>title<span class="token punctuation">:</span> <span class="token string">'Hello Firestore 🔥'</span><span class="token punctuation">,</span> id<span class="token punctuation">:</span> <span class="token string">'abc123'</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="5"><li>The document will also be inserted in Firestore at the firestorePath <code>myDocs</code>.</li></ol> <h3 id="patch-example"><a href="#patch-example" aria-hidden="true" class="header-anchor">#</a> Patch example</h3> <p>If you specify the <code>id</code> you can modify any data of existing documents.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> id <span class="token operator">=</span> <span class="token string">'abc123'</span>
<span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'myModule/set'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>id<span class="token punctuation">,</span> title<span class="token punctuation">:</span> <span class="token string">'Hello Universe 💫 🛰'</span><span class="token punctuation">,</span> newField<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// or</span>
<span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'myModule/patch'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>id<span class="token punctuation">,</span> title<span class="token punctuation">:</span> <span class="token string">'Hello Universe 💫 🛰'</span><span class="token punctuation">,</span> newField<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>As you can see in the example above, with the <code>patch</code> action (or <code>set</code> with <code>id</code> field) you can modify and/or add new fields.</p> <p>You can also patch <strong>nested fields</strong> like so:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'myModule/patch'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>id<span class="token punctuation">,</span> tags<span class="token punctuation">:</span> <span class="token punctuation">{</span>water<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>Any other fields inside <code>tags</code> will be left alone and only <code>water</code> will be updated (or added as new prop).</p> <h3 id="delete-example"><a href="#delete-example" aria-hidden="true" class="header-anchor">#</a> Delete example</h3> <p>There are two ways to delete things: (1) the whole document or (2) <strong>just a field!</strong> (A field meaning &quot;a property&quot; of that document)</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> id <span class="token operator">=</span> <span class="token string">'abc123'</span>
<span class="token comment">// Delete the whole document:</span>
<span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'myModule/delete'</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span>
<span class="token comment">// Delete a field of a document:</span>
<span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'myModule/delete'</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.tags.water`</span></span><span class="token punctuation">)</span>

<span class="token comment">// the document looks like:</span>
<span class="token punctuation">{</span>
  id<span class="token punctuation">:</span> <span class="token string">'abc123'</span><span class="token punctuation">,</span>
  tags<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    fire<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    water<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// only `water` will be deleted in this example!</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>In the above example you can see that you can delete a field (or property) by passing a string and separate sub-props with <code>.</code> (See <a href="/vuex-easy-firestore/firestore-fields-and-functions.html#delete-fields">here</a> for more info on deleting fields)</p> <h3 id="auto-generated-fields"><a href="#auto-generated-fields" aria-hidden="true" class="header-anchor">#</a> Auto-generated fields</h3> <p>When working with collections, each document insert or update will automatically receive these fields:</p> <ul><li><code>created_at</code> / <code>updated_at</code> both use: <code>Firebase.firestore.FieldValue.serverTimestamp()</code></li> <li><code>created_by</code> / <code>updated_by</code> will automatically fill in the userId</li></ul> <p>You can disable these fields by adding them to your <code>guard</code> config. See the <a href="/vuex-easy-firestore/extra-features.html#fillables-and-guard">related documentation on guard</a>.</p> <h3 id="manually-assigning-doc-ids"><a href="#manually-assigning-doc-ids" aria-hidden="true" class="header-anchor">#</a> Manually assigning doc IDs</h3> <p>You can, <strong>but do not need to</strong>, assign doc IDs manually.</p> <p>Every insert will automatically generate an ID and return a promise resolving in the ID of the doc added to the store and Firestore.</p> <p>This is how you can use the auto-generated ID:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> id <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'moduleName/insert'</span><span class="token punctuation">,</span> newDoc<span class="token punctuation">)</span> <span class="token comment">// returns id</span>
<span class="token comment">// mind the await!</span>
</code></pre></div><p><strong>When assigning ID's manually</strong> the recommended way to do so is:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// assign manually</span>
<span class="token keyword">const</span> id <span class="token operator">=</span> getters<span class="token punctuation">[</span><span class="token string">'moduleName/dbRef'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">doc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>id
<span class="token keyword">const</span> newDoc <span class="token operator">=</span> <span class="token punctuation">{</span>id<span class="token punctuation">,</span> <span class="token comment">/* and other fields */</span><span class="token punctuation">}</span>
<span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'moduleName/insert'</span><span class="token punctuation">,</span> newDoc<span class="token punctuation">)</span>
</code></pre></div><p>As you can see in the example above, each vuex-easy-firestore module has a getter called <code>dbRef</code> with the reference of your <code>firestorePath</code>. So when you add <code>.doc().id</code> to that reference you will &quot;create&quot; a new ID, just how Firestore would do it. This way you can do whatever you want with the ID before / after the insert.</p> <p>Please note you can also access the ID (even if you don't manually pass it) in the <a href="/vuex-easy-firestore/hooks.html#hooks">hooks</a>.</p> <h2 id="doc-mode"><a href="#doc-mode" aria-hidden="true" class="header-anchor">#</a> 'doc' mode</h2> <p>In 'doc' mode all changes will take effect on the single document you have passed in the firestorePath.</p> <p>You will be able to use these actions:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'moduleName/set'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">'my new name'</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// same as `patch`</span>
<span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'moduleName/patch'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>status<span class="token punctuation">:</span> <span class="token string">'awesome'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// Only the props you pass will be updated.</span>
<span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'moduleName/delete'</span><span class="token punctuation">,</span> <span class="token string">'status'</span><span class="token punctuation">)</span> <span class="token comment">// pass a prop-name</span>
<span class="token comment">// Only the propName (string) you pass will be deleted</span>
</code></pre></div><p>And yes, just like in 'collection' mode, you can pass a prop-name with sub-props like so:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'moduleName/delete'</span><span class="token punctuation">,</span> <span class="token string">'settings.banned'</span><span class="token punctuation">)</span>

<span class="token comment">// the doc looks like:</span>
<span class="token punctuation">{</span>
  userName<span class="token punctuation">:</span> <span class="token string">'Satoshi'</span><span class="token punctuation">,</span>
  settings<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    showStatus<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    banned<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// only `banned` will be deleted from the item!</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="auto-generated-fields-2"><a href="#auto-generated-fields-2" aria-hidden="true" class="header-anchor">#</a> Auto-generated fields</h3> <p>When working with a single doc, your document updates will automatically receive these fields:</p> <ul><li><code>updated_at</code> uses: <code>Firebase.firestore.FieldValue.serverTimestamp()</code></li> <li><code>updated_by</code> will automatically fill in the userId</li></ul> <p>Just as with 'collection' mode, you can disable these fields by adding them to your <code>guard</code> config. See the <a href="/vuex-easy-firestore/extra-features.html#fillables-and-guard">related documentation on guard</a>.</p> <h2 id="batch-updates-inserts-deletions"><a href="#batch-updates-inserts-deletions" aria-hidden="true" class="header-anchor">#</a> Batch updates/inserts/deletions</h2> <blockquote><p>Only for 'collection' mode.</p></blockquote> <p>In cases you don't want to loop through items you can also use the special batch actions below. The main difference is you will have separate hooks (see <a href="/vuex-easy-firestore/hooks.html#hooks">hooks</a>), and batches are optimised to update the vuex store first for all changes and the syncs to firestore last.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'moduleName/insertBatch'</span><span class="token punctuation">,</span> docs<span class="token punctuation">)</span>
<span class="token comment">// pass an array of docs</span>

<span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'moduleName/patchBatch'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>doc<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> ids<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// `doc` is an object with the fields to patch, `ids` is an array</span>

<span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'moduleName/deleteBatch'</span><span class="token punctuation">,</span> ids<span class="token punctuation">)</span>
<span class="token comment">// pass an array of ids</span>
</code></pre></div><blockquote><p>All batch actions will return a promise resolving to an array of the edited / added ids.</p></blockquote> <h2 id="duplicating-docs"><a href="#duplicating-docs" aria-hidden="true" class="header-anchor">#</a> Duplicating docs</h2> <blockquote><p>Only for 'collection' mode.</p></blockquote> <p>You can duplicate a document really simply by dispatching 'duplicate' and passing the id of the target document.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// let's duplicate Bulbasaur who has the id '001'</span>
<span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'pokemonBox/duplicate'</span><span class="token punctuation">,</span> <span class="token string">'001'</span><span class="token punctuation">)</span>
</code></pre></div><p>This will create a copy of Bulbasaur (and all its props) with a random new ID. The duplicated doc will automatically be added to your vuex module and synced as well.</p> <p>If you need to know which new ID was generated for the duplicate, you can retrieve it from the action:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> idMap <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'pokemonBox/duplicate'</span><span class="token punctuation">,</span> <span class="token string">'001'</span><span class="token punctuation">)</span>
<span class="token comment">// mind the await!</span>
<span class="token comment">// idMap will look like this:</span>
<span class="token punctuation">{</span><span class="token string">'001'</span><span class="token punctuation">:</span> dupeId<span class="token punctuation">}</span>
<span class="token comment">// dupeId will be a string with the ID of the duplicate!</span>
</code></pre></div><p>In the example above, if Bulbasaur ('001') was duplicated and the new document has random ID <code>'123abc'</code> the <code>idMap</code> will be <code>{'001': '123abc'}</code>.</p> <h3 id="duplicate-batch"><a href="#duplicate-batch" aria-hidden="true" class="header-anchor">#</a> Duplicate batch</h3> <p>This is how you duplicate a batch of documents:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> idMap <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'pokemonBox/duplicateBatch'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'001'</span><span class="token punctuation">,</span> <span class="token string">'004'</span><span class="token punctuation">,</span> <span class="token string">'007'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// idMap will look like this:</span>
<span class="token punctuation">{</span>
  <span class="token string">'001'</span><span class="token punctuation">:</span> <span class="token string">'some-random-new-ID-1'</span><span class="token punctuation">,</span>
  <span class="token string">'004'</span><span class="token punctuation">:</span> <span class="token string">'some-random-new-ID-2'</span><span class="token punctuation">,</span>
  <span class="token string">'007'</span><span class="token punctuation">:</span> <span class="token string">'some-random-new-ID-3'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>This way you can use the result if you need to do extra things to your duplicated docs and you will know for each ID which new ID was used to make a duplication.</p></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/mesqueeb/vuex-easy-firestore/edit/dev/docs/add-and-manage-data.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/vuex-easy-firestore/setup.html" class="prev">
          Installation &amp; setup
        </a></span> <span class="next"><a href="/vuex-easy-firestore/query-data.html">
          Query data
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/vuex-easy-firestore/assets/js/4.6f83facc.js" defer></script><script src="/vuex-easy-firestore/assets/js/app.b09044e6.js" defer></script>
  </body>
</html>
